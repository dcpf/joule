[
    {
        "host": "localhost",
        "port": 8081,
        "routes": [
            {
                "path": "/hello",
                "components": [
                    {
                        "type": "choice",
                        "conditions": [
                            {
                                "if": "$$req.getParam('id') === 'hello'$$",
                                "then": "$$res.setVariable('id', 'HELLO')$$"
                            },
                            {
                                "if": "$$req.getParam('id') === 'hello2'$$",
                                "then": "$$res.setVariable('id', 'HELLO2')$$"
                            },
                            {
                                "if": "$$true$$",
                                "then": "$$res.setVariable('id', 'Invalid param: ' + req.getParam('id'))$$"
                            }
                        ]
                    },
                    {
                        "type": "logger",
                        "message": "ID: $$res.getVariable('id')$$"
                    },
                    {
                        "type": "setVariable",
                        "name": "passedInId",
                        "value": "$$req.getParam('id')$$"
                    },
                    {
                        "type": "logger",
                        "message": "passedInId: $$res.getVariable('passedInId')$$"
                    },
                    {
                        "type": "setHeaders",
                        "headers": {
                            "test": "testing",
                            "test2": "testing2"
                        }
                    },
                    {
                        "type": "logger",
                        "message": "Headers: $$JSON.stringify(res._headers)$$"
                    },
                    {
                        "type": "customFunction",
                        "require": "../sample/sampleCustomFunctions",
                        "function": "customFunction"
                    },
                    {
                        "type": "logger",
                        "message": "myVar: $$res.locals.myVar$$"
                    },
                    {
                        "type": "parseTemplate",
                        "file": "sample/sample.txt",
                        "attrs": {"id": "$$req.getParam('id')$$"},
                        "setPayload": true
                    },
                    {
                        "type": "customErrorHandler",
                        "require": "../sample/sampleCustomFunctions",
                        "function": "errorHandler"
                    }
                ]
            },
            {
                "path": "/hello2/:id",
                "components": [
                    {
                        "type": "setPayload",
                        "value": "You passed in ID: $$req.getParam('id')$$"
                    }
                ]
            },
            {
                "path": "/hello3",
                "components": [
                    {
                        "type": "setPayload",
                        "value": "You passed in ID: $$req.getParam('id')$$"
                    }
                ]
            }
        ]
    },
    {
        "host": "localhost",
        "port": 8082,
        "routes": [
            {
                "path": "/hello",
                "components": [
                    {
                        "type": "setPayload",
                        "value": "Hello World 3"
                    }
                ]
            },
            {
                "path": "/hello2",
                "components": [
                    {
                        "type": "setPayload",
                        "value": "Hello World 4"
                    }
                ]
            }
        ]
    }
]
